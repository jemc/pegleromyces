
BasicSpec {
  name: "Parser"
  
  new_parser: Parser { }
  
  [tests]
  
  it "starts with a grammar that matches any string": {
    refute(new_parser.parse("xyz").had_failure)
  }
  
  it "stores the resulting composition in output": {
    parser = new_parser
    parser.grammar = Patterns::Composition {
      var inner: Patterns::Capture {
        var name: :foo
        var inner: Patterns::AnyCharacter.new.*
      }
      new_environment: Patterns::Composition::Environment {
        "!": "ABC_"foo"_123"
      }
    }
    
    parser.parse("xyz")
    refute(parser.had_failure)
    assert_equal(parser.output, "ABC_xyz_123")
  }
}
