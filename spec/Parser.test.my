
BasicSpec {
  name: "Parser"
  
  new_parser: Parser { }
  patt: Patterns::ShorthandMethods { }
  
  [tests]
  
  it "starts with a grammar that matches any string": {
    assert(new_parser.parse("xyz").result)
  }
  
  it "stores the resulting toplevel captures in results": {
    parser = new_parser
    parser.grammar = patt.r((patt.any.*)[:foo]) { "ABC_"foo"_123" }
    parser.grammar = (parser.grammar)[:root]
    
    parser.parse("xyz")
    assert_equal(parser.result.fetch(:root), "ABC_xyz_123")
  }
}
