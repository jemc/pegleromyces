
BasicSpec {
  name: "Stream::Parser"
  
  new_parser: Stream::Parser.new
  
  [tests]
  
  it "can match from a minimal grammar": {
    parser = new_parser
    parser.grammar = Grammar {
      [rules]
      rule root: si.+
    }
    state = parser.parse([:x, :y, :z])
    assert_equal(state.end_idx, 3)
  }
  
  it "can create a result from reductions": {
    parser = new_parser
    parser.grammar = Grammar {
      [rules]
      rule root: r(si.+[:list]) { list.join('.') }[:root]
    }
    state = parser.parse([:x, :y, :z])
    assert_equal(state.result[:root], 'x.y.z')
  }
  
}
